#!/bin/bash

./clean.sh

./refresh-security-measurement-files.sh

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20140211- --xmlsummary EAP7-resolved-issues-post-wildfly-8.0.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-8.0.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20140530- --xmlsummary EAP7-resolved-issues-post-wildfly-8.1.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-8.1.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20141120- --xmlsummary EAP7-resolved-issues-post-wildfly-8.2.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-8.2.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20150723- --xmlsummary EAP7-resolved-issues-post-wildfly-8.2.1.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-8.2.1.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20150702- --xmlsummary EAP7-resolved-issues-post-wildfly-9.0.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-9.0.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20150723- --xmlsummary EAP7-resolved-issues-post-wildfly-9.0.1.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-9.0.1.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20160130- --xmlsummary EAP7-resolved-issues-post-wildfly-10.0.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-10.0.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20160820- --xmlsummary EAP7-resolved-issues-post-wildfly-10.1.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-10.1.0.Final-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20170328- --xmlsummary EAP7-resolved-issues-post-wildfly-11.0.0.Alpha1-release-date.xml > EAP7-resolved-issues-post-wildfly-11.0.0.Alpha1-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20170803- --xmlsummary EAP7-resolved-issues-post-wildfly-11.0.0.Beta1-release-date.xml > EAP7-resolved-issues-post-wildfly-11.0.0.Beta1-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20170825- --xmlsummary EAP7-resolved-issues-post-wildfly-11.0.0.CR1-release-date.xml > EAP7-resolved-issues-post-wildfly-11.0.0.CR1-release-date.txt

perl daysofrisk.pl --cpe jboss_enterprise_application_platform:7 --dates 20171023- --xmlsummary EAP7-resolved-issues-post-wildfly-11.0.0.Final-release-date.xml > EAP7-resolved-issues-post-wildfly-11.0.0.Final-release-date.txt

for i in 8.0.0.Final 8.1.0.Final 8.2.0.Final 8.2.1.Final 9.0.0.Final 9.0.1.Final 10.0.0.Final 10.1.0.Final 11.0.0.Alpha1 11.0.0.Beta1 11.0.0.CR1 11.0.0.Final
do
    xsltproc html-report.xsl EAP7-resolved-issues-post-wildfly-$i-release-date.xml > EAP7-resolved-issues-post-wildfly-$i-release-date.html
done

# this is for updates to the people.redhat.com server
scp *.html *.xsl rlucente@people.redhat.com:public_html

